window.popbot.comparisons=[{id:"equal",label:"Equals",compare:function(e,o){return e==o}},{id:"not-equal",label:"Not equals",compare:function(e,o){return e!=o}},{id:"greater-than",label:"Greater Than",compare:function(e,o){return parseFloat(e)>parseFloat(o)}},{id:"less-than",label:"Less Than",compare:function(e,o){return parseFloat(e)<parseFloat(o)}},{id:"contains",label:"Contains",compare:function(e,o){return e.includes(o)}},{id:"not-contains",label:"Doesn't Contain",compare:function(e,o){return!o.includes(e)}}],(()=>{const e=e=>{const o=document.cookie.split(";");for(var t=0;t<o.length;t++){var n=o[t].split("=");if(e==n[0].trim())return decodeURIComponent(n[1])}return null};window.popbot.conditions=[{id:"url.href",label:"Full URL",category:"URL",value:window.location.href},{id:"url.pathname",label:"Path",category:"URL",value:window.location.pathname},{id:"url.host",label:"Domain",category:"URL",value:window.location.host},{id:"url.hash",label:"Hash",category:"URL",value:window.location.hash},{id:"url.search",label:"Query Params",category:"URL",value:window.location.search},{id:"url.protocol",label:"Protocol",category:"URL",value:window.location.protocol},{id:"user.device.isMobile",label:"Is Mobile",category:"Device",value:navigator.userAgentData.mobile?1:0,options:[{id:"0",label:"False"},{id:"1",label:"True"}]},{id:"user.device.lang",label:"Language Code",category:"Device",value:navigator.language},{id:"user.device.os",label:"Operating System",category:"Device",value:navigator.userAgentData.platform},{id:"user.journey.referrer",label:"Referrer",category:"User Journey",value:e("popBot_journey_referrer")},{id:"user.journey.returning",label:"Is Returning",category:"User Journey",value:e("popBot_journey_returning"),options:[{id:"0",label:"False"},{id:"1",label:"True"}]},{id:"user.journey.landing",label:"Is First Page",category:"User Journey",value:e("popBot_journey_landing"),options:[{id:"0",label:"False"},{id:"1",label:"True"}]},{id:"user.journey.pageCount",label:"Pages Count",category:"User Journey",value:e("popBot_journey_pageCount")},{id:"post.isFrontPage",label:"Is Front Page",category:"Post",value:window.popbot?.condition_values["post.isFrontPage"]?1:0,options:[{id:"0",label:"False"},{id:"1",label:"True"}]},{id:"post.ID",label:"Post ID",category:"Post",value:window.popbot?.condition_values["post.ID"]},{id:"post.title",label:"Title",category:"Post",value:window.popbot?.condition_values["post.title"]},{id:"post.type",label:"Post Type",category:"Post",value:window.popbot?.condition_values["post.type"]},{id:"post.author",label:"Author",category:"Post",value:window.popbot?.condition_values["post.author"]},{id:"date.time",label:"Unix Time",category:"Time",value:window.popbot?.condition_values["date.time"]},{id:"date.dayOfWeek",label:"Day of the Week",category:"Time",value:window.popbot?.condition_values["date.dayOfWeek"]},{id:"date.date",label:"Date",category:"Time",value:window.popbot?.condition_values["date.date"]},{id:"date.month",label:"Month",category:"Time",value:window.popbot?.condition_values["date.month"]},{id:"date.year",label:"Year",category:"Time",value:window.popbot?.condition_values["date.year"]},{id:"user.wp.isLoggedIn",label:"Is Logged In",category:"WordPress User",value:window.popbot?.condition_values["user.wp.isLoggedIn"]?1:0,options:[{id:"0",label:"False"},{id:"1",label:"True"}]},{id:"user.wp.login",label:"Username",category:"WordPress User",value:window.popbot?.condition_values["user.wp.login"]},{id:"user.wp.roles",label:"Roles",category:"WordPress User",value:window.popbot?.condition_values["user.wp.roles"]},{id:"math.random",label:"Random Number",category:"Maths",value:Math.floor(100*Math.random())}]})(),(()=>{class e{constructor(e){if(!e)return!1;var o=document.getElementById(e.id);if(!o)return!1;this.id=e.id,this.opts=e,this.cookie=`popBot_status_${this.id}`,this.element=o,this.trigger=e.trigger,this.conditions=e.conditions,this.inline=this.element.classList.contains("popbot-inline"),this.triggerObject=window.popbot.triggers.find((e=>e.id==this.trigger.trigger)),this.triggerObject?.setupTrigger(this,this.trigger.threshold),this.element.popBot=this,this.element.addEventListener("click",(e=>{const o="[data-popbot='dismiss']",t="a, btn, [data-popbot='convert']";e.target.matches(o)||e.target.closest(o)?this.dismiss():(e.target.matches(t)||e.target.closest(t))&&this.convert()}))}_conditionsMet(){for(const e of this.conditions){let o=window.popbot.comparisons.find((o=>o.id===e.comparison)),t=window.popbot.conditions.find((o=>o.id===e.condition)),n=t.value,i=e.value;if(o&&i&&t&&!o.compare(n,i))return window.popbot.manager.debug.popAttempt(this,!1,`Condition not met (${t.label} ${o.label.toLowerCase()} '${i}', '${n}' given).`),!1}return!0}pop(){return!(this.showing||(!window.popbot.manager.cookie.get(this.cookie)||window.popbot.config.allowReshow&&"shown"==window.popbot.manager.cookie.get(this.cookie)?window.popbot.manager.bots.isShowing()&&!this.inline?(window.popbot.manager.debug.popAttempt(this,!1,"A PopBot is already showing."),1):Date.now()-window.popbot.manager.bots.loadTime<window.popbot.config.timeBeforeFirstPopup&&!this.inline?(window.popbot.manager.debug.popAttempt(this,!1,"Not long enough since page load."),1):Date.now()-window.popbot.manager.bots.lastShown<window.popbot.config.timeBetweenPopups&&!this.inline?(window.popbot.manager.debug.popAttempt(this,!1,"Not long enough since last PopBot."),1):!this._conditionsMet()||(this._show(),0):(window.popbot.manager.debug.popAttempt(this,!1,"This PopBot has already shown."),1)))}_show(){this.element.hidden=!1,this.element.inert=!1,this.showing=!0,this.element.classList.add("entering"),setTimeout((()=>{this.element.classList.remove("entering")}),500),window.popbot.manager.cookie.set(this.cookie,"shown"),window.popbot.manager.debug.popAttempt(this,!0,"PopBot now showing!");const e=new CustomEvent("popBotShow",this._getEventOptions());this.element.dispatchEvent(e),window.popbot.manager.fetch.send("popbotAnalytics",{event:"shown",id:this.id,url:location.href})}_hide(){window.popbot.manager.bots.lastShown=Date.now(),this.element.classList.add("leaving"),setTimeout((()=>{this.element.classList.remove("leaving"),this.element.hidden=!0,this.element.inert=!0,this.showing=!1}),500)}_getEventOptions(){return{bubbles:!0,details:{id:this.id,element:this.element}}}convert(){this._hide(),window.popbot.manager.cookie.set(this.cookie,"converted"),window.popbot.manager.fetch.send("popbotAnalytics",{event:"converted",id:this.id,url:location.href}),window.popbot.manager.debug.popAttempt(this,!1,"Converted on by user.");const e=new CustomEvent("popBotConvert",this._getEventOptions());this.element.dispatchEvent(e)}dismiss(){this._hide(),window.popbot.manager.cookie.set(this.cookie,"dismissed"),window.popbot.manager.fetch.send("popbotAnalytics",{event:"dismissed",id:this.id,url:location.href}),window.popbot.manager.debug.popAttempt(this,!1,"Dismissed by user.");const e=new CustomEvent("popBotDismiss",this._getEventOptions());this.element.dispatchEvent(e)}}window.popbot.manager={debug:{store:[],popAttempt(e,o,t){let n={bot:e,success:o,message:t};this.store.push({type:"popAttempt",time:Date.now(),data:n});const i=new CustomEvent("popbot-debug",{bubbles:!0,detail:n});e.element.dispatchEvent(i)}},fetch:{send:async function(e,o){o={...o,action:e};let t=new FormData;for(let e in o)t.append(e,o[e]);const n=await fetch(window.popbot.fetch.ajax_url,{method:"POST",body:t});return await n.json()},api:async function(e,o={},t="GET"){let n=new URL(`${popbot.wp.home_url}/wp-json/${e}`),i={method:t,headers:new Headers({"X-WP-Nonce":window.popbot.fetch.rest_nonce})};if("GET"==t)for(const e in o)n.searchParams.append(e,o[e]);else if(o instanceof FormData)i.body=o;else{i.body=new FormData;for(const e in o)i.body.append(e,o[e])}return await fetch(n.href,i).then((e=>e.json()))}},cookie:{get:function(e){for(var o=document.cookie.split(";"),t=0;t<o.length;t++){var n=o[t].split("=");if(e==n[0].trim())return decodeURIComponent(n[1])}return null},set:function(e,o){var t=e+"="+encodeURIComponent(o)+";path=/;expires=max-age";document.cookie=t}},bots:{get:function(e){for(const o of this.store)if(o.ID==e)return o;return!1},isShowing:function(){for(const e of this.store)if(e.showing)return!0;return!1},add:function(e){this.store.push(e)},setupCustomConditions:async function(){const e=await popbot.manager.fetch.api("/wp/v2/popbot_condition/",{context:"edit",_fields:["id","slug","title","content"]});for(const o of e)try{let e=new Function(o.content.raw);window.popbot.conditions.push({category:"Custom",id:`custom.${o.slug}`,label:o.title.rendered,value:e()})}catch(e){console.error(e)}},init:function(){for(const o of window.popbot.bots)try{let t=new e(o);this.add(t)}catch(e){console.error(null,e)}},lastShown:0,loadTime:Date.now(),store:[]}},document.addEventListener("DOMContentLoaded",(()=>{window.popbot.manager.bots.init(),window.popbot.manager.bots.setupCustomConditions(),document.querySelectorAll(".popbot-condition").forEach((e=>{if(document.body.classList.contains("block-editor-page"))return;const o=e.textContent,t=window.popbot.conditions.find((e=>e.id==o));e.textContent=t?.value,e.style.opacity=1}))}),{once:!0})})(),window.popbot.triggers=[{id:"click",label:"Click Element",icon:"ads_click",category:"Engagement",color:"#85A700",options:[{placeholder:"#id",label:"Element Selector"}],setupTrigger:function(e,o){window.addEventListener("click",(t=>{if(o&&!t.target.matches(o)&&!t.target.closest(o))return!1;e.pop()}))}},{id:"exit_intent",label:"Go to Exit",icon:"meeting_room",category:"Engagement",color:"#85A700",setupTrigger:function(e){document.addEventListener("mouseout",(o=>{o.toElement||o.relatedTarget||e.pop()}))}},{id:"scroll",label:"Scroll Depth",icon:"open_with",category:"Engagement",color:"#85A700",options:[{placeholder:75,type:"number",label:"Scroll Depth"}],setupTrigger:function(e,o){window.addEventListener("scroll",(t=>{const n=window.scrollY/(document.body.scrollHeight-window.innerHeight)*100;if(o&&n<o)return!1;e.pop()}))}},{id:"submit",label:"Form Submission",icon:"playlist_add_check",category:"Engagement",color:"#85A700",options:[{placeholder:"#id",label:"Form Selector"}],setupTrigger:function(e,o){window.addEventListener("submit",(t=>{if(o&&!t.submitter.matches(o))return!1;e.pop()}))}},{id:"instant",label:"Instant",icon:"bolt",category:"Time",color:"#1E92F8",setupTrigger:function(e){e.pop(),setTimeout((()=>e.pop()),window.popbot.config.timeBeforeFirstPopup+1)}},{id:"idle",label:"Idle Time",icon:"hourglass_bottom",category:"Time",color:"#1E92F8",options:[{placeholder:30,type:"number",label:"Idle Duration"}],setupTrigger:function(e,o){let t;function n(n){clearTimeout(t),t=setTimeout((()=>{e.pop()}),1e3*o)}["mousedown","mousemove","keydown","click","scroll","touchstart"].forEach((function(e){document.addEventListener(e,n,!0)}))}},{id:"duration",label:"Time on Page",icon:"schedule",category:"Time",color:"#1E92F8",options:[{placeholder:60,type:"number",label:"Duration Time"}],setupTrigger:function(e,o){setTimeout((()=>{e.pop()}),1e3*o)}},{id:"event",label:"JavaScript Event",icon:"code",category:"Other",color:"#F8A11E",options:[{placeholder:"click",label:"Event Type"}],setupTrigger:function(e,o){window.addEventListener(o,(o=>{e.pop()}))}}];