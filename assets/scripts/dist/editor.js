wp.domReady((()=>{document.querySelectorAll(".pb_metabox__mediaPicker").forEach((e=>{(e=>{if(e.dataset.setup)return;e.dataset.setup=!0;let t=e.querySelector(".pb_metabox__mediaPicker__input"),a=e.querySelector(".pb_metabox__mediaPicker__choose"),r=e.querySelector(".pb_metabox__mediaPicker__remove"),l=e.querySelector(".pb_metabox__mediaPicker__preview"),o=wp.media({title:"Insert image",button:{text:"Use this image"},multiple:!1});o.on("select",(()=>{let e=o.state().get("selection").first().toJSON();console.log(e),l.style.backgroundImage=`url( "${e.sizes.medium.url}" )`,t.value=e.id})),a.addEventListener("click",(()=>o.open())),r.addEventListener("click",(()=>{l.style.backgroundImage="none",t.value=""}))})(e)})),document.querySelectorAll('[data-pbslider="parent"]').forEach((e=>{const t=e.querySelector('[data-pbslider="slider"]'),a=e.querySelector('[data-pbslider="input"]'),r=e=>{let r=parseInt(e.target.value);const l=parseInt(t.max),o=parseInt(t.min);r=Math.min(Math.max(r,o),l),t.value=r,a.value=r};t.addEventListener("input",r),a.addEventListener("input",r)})),document.querySelectorAll("[data-pbmetabox-presets-toggle]").forEach((e=>{const t=e.closest("[data-pbmetabox]").querySelectorAll("[data-pbmetabox-presets]");let a="true"==e.dataset.pbmetaboxPresetsToggle;e.setAttribute("aria-label","Toggle precision controls");var r=r=>{a=r,e.setAttribute("aria-pressed",!a),e.setAttribute("data-pbmetabox-presets-toggle",a),t.forEach((e=>{const t="true"==e.dataset.pbmetaboxPresets!=a;e.hidden=t,e.querySelectorAll("input").forEach((e=>e.disabled=t))}))};r(a),e.addEventListener("click",(()=>{r(!a)}))}))}));